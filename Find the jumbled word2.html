<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ЁЯзй роХрпБро┤роорпНрокро┐роп роЪрпКро▓рпНро▓рпИроХрпН роХрогрпНроЯрпБрокро┐роЯро┐</title>
<style>
:root{
  --bg:#fff8e1; --card:#ffffff; --accent:#5b0dec;
  --ok:#00a650; --bad:#e53935;
}
body{
  margin:0; padding:20px;
  font-family:"Noto Sans Tamil","Baloo Thambi 2",sans-serif;
  background:var(--bg); text-align:center;
}
h1{
  display:inline-block; padding:10px 18px; border-radius:10px;
  background:#fff3e0; border:3px solid #ff9800;
  font-size:22px; margin-bottom:18px;
}
.header-box{
  display:flex; justify-content:space-between;
  align-items:center; background:#e3f2fd;
  border:2px solid #90caf9; border-radius:10px;
  padding:10px 20px; font-weight:bold;
  font-size:18px; color:#0d47a1; margin-bottom:15px;
}
.quiz{max-width:900px;margin:auto;text-align:left;}
.qcard{
  position:relative; background:var(--card);
  border-radius:12px; padding:20px 20px 15px 90px;
  margin:20px 0; box-shadow:0 2px 6px rgba(0,0,0,0.06);
  border:2px solid #eee;
}
.qnumber{
  position:absolute; top:25px; left:25px;
  width:40px;height:40px;
  background:linear-gradient(135deg,#FF7043,#E64A19);
  color:#fff;font-weight:bold;font-size:18px;
  border-radius:50%;display:flex;align-items:center;
  justify-content:center;box-shadow:0 4px 6px rgba(0,0,0,0.25);
}
.scrambled-row{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:12px;}
.scr-letter{
  min-width:44px;height:44px;line-height:44px;text-align:center;
  border:2px solid #f44336;border-radius:8px;
  font-weight:700;font-size:20px;color:#d32f2f;
  background:#fff0f0;padding:0 6px;box-sizing:border-box;
}
.answer-input{
  width:250px;height:46px;font-size:20px;padding:6px 10px;
  text-align:left;border:2px solid #bdbdbd;border-radius:10px;
  transition:all .15s ease;box-sizing:border-box;
}
.answer-input.ok{border-color:var(--ok);background:#eaffef;}
.answer-input.bad{border-color:var(--bad);background:#fff0f0;}
.controls{display:flex;gap:12px;justify-content:center;margin:20px 0;flex-wrap:wrap;}
button{padding:10px 18px;border:none;border-radius:8px;cursor:pointer;color:#fff;font-size:16px;background:var(--accent);}
button.warn{background:#f39c12;}
button.home{background:#1976d2;}
button.next{background:#17a2b8;}
button.retry{background:#c2185b;}
.pagination{display:flex;justify-content:center;gap:6px;flex-wrap:wrap;margin:15px 0;}
.page-btn{padding:6px 12px;border:1px solid #ccc;border-radius:6px;cursor:pointer;background:#fff;color:#333;}
.page-btn.active{background:var(--accent);color:#fff;font-weight:700;}
#info{margin-top:10px;font-weight:700;color:#114b5f;text-align:center;}
</style>
</head>
<body>
<h1>ЁЯзй роХрпБро┤роорпНрокро┐роп роЪрпКро▓рпНро▓рпИроХрпН роХрогрпНроЯрпБрокро┐роЯро┐</h1>

<div id="quiz" class="quiz"></div>
<div id="pagination" class="pagination"></div>

<div class="controls">
  <button id="prevBtn" class="warn">тмЕя╕П рокро┐ройрпНроЪрпЖро▓рпН</button>
  <button id="homeBtn" class="home">ЁЯПа роорпБроХрокрпНрокрпБ</button>
  <button id="nextBtn" class="next">тЮбя╕П роЕроЯрпБродрпНродрпБ</button>
  <button id="retryBtn" class="retry">ЁЯФБ роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐ роЪрпЖропрпН</button>
  <button id="checkBtn" style="display:none;">тЬЕ роЪро░ро┐рокро╛ро░рпН</button>
</div>

<div id="info"></div>

<script>
// ----------------- SCRIPT START -----------------
const WORDS=[
  "рооро╛роорпНрокро┤роорпН","рокрпВройрпИроХрпНроХрпБроЯрпНроЯро┐","роиро╛ропрпНроХрпНроХрпБроЯрпНроЯро┐","роорпАройрпН","рокрпБродрпНродроХроорпН","роХроЯро▓рпН","роЕроорпНрооро╛","рокрпЖрогрпН","рооро░роорпН","ро╡рпАроЯрпБроХро│рпН",
  "родрогрпНрогрпАро░рпН","роХрпЛро┤ро┐роХрпНроХрпБроЮрпНроЪрпБ","роЖроЯрпНроЯрпБроХрпНроХрпБроЯрпНроЯро┐","рооро▓рпИроХрпНроХрпБройрпНро▒рпБ","рооро┤рпИроирпАро░рпН","рокропрогроорпН","рокро╛ро▓роорпН","рокро▒ро╡рпИ","роорогро┐родрпНродрпБро│ро┐","роЕродрпНродрпИ",
  "рокро╛ро▓рпН","роХройро┐","ро╡ро╛ройроорпН","родрпЗройрпН","роироХро░рпН","роирогрпНроЯрпБ","роорогро▓рпН","рооро▓ро░рпН","роЕро▓рпИ","роХрпЛро╡ро┐ро▓рпН",
  "роЖроЪро┐ро░ро┐ропро░рпН","роорпАройро╡ро░рпН","рокроЪрпНроЪрпИ","рокро╛роорпНрокрпБ","ро╡ро┐ро┤ро╛","роирпАро▓роорпН","роЪрпВро░ро┐ропройрпН","роХрпЛро╡рпИ","рокропройрпН","роорпБроорпНрокрпИ",
  "роЪро┐роЩрпНроХроорпН","роорпБроЯрпНроЯрпИ","рооро░рпБродрпНродрпБро╡ро░рпН","роХрпБрооро░ройрпН","роОро▓рпБроорпНрокрпБ","роироХро░роорпН","роЕро░роЪройрпН","ро╡ро┐ро▓роЩрпНроХрпБ" 
];

/// родрооро┐ро┤рпН роОро┤рпБродрпНродрпБроХро│рпИ grapheme level-ро▓рпН рокро┐ро░ро┐роХрпНроХрпБроорпН function
function splitTamilWord(word){
  const segmenter = new Intl.Segmenter('ta', { granularity: 'grapheme' });
  return Array.from(segmenter.segment(word), s => s.segment);
}
// родрооро┐ро┤рпН grapheme-роХро│рпИ рокро┐ро░ро┐роХрпНроХрпБроорпН function
function splitTamilWord(word){
  const segmenter = new Intl.Segmenter('ta', { granularity: 'grapheme' });
  return Array.from(segmenter.segment(word), s => s.segment);
}

// тЬЕ родрооро┐ро┤рпН роОро┤рпБродрпНродрпБроХро│рпИ grapheme level-ро▓рпН рокро┐ро░ро┐роХрпНроХрпБроорпН function (safe + fallback)
function splitTamilWord(word){
  if (window.Intl && Intl.Segmenter) {
    const segmenter = new Intl.Segmenter('ta', { granularity: 'grapheme' });
    return Array.from(segmenter.segment(word), s => s.segment);
  } else {
    // fallback: simple split тАУ рокро┤рпИроп browser-роХро│рпБроХрпНроХро╛роХ
    return word.split('');
  }
}

// тЬЕ роЪрпАро░ро▒рпНро▒ роХро▓рокрпНрокрпБ (shuffle) тАУ роЖройро╛ро▓рпН original рокрпЛро▓ ро╡ро░роХрпНроХрпВроЯро╛родрпБ
function shuffleTamilWord(word){
  const letters = splitTamilWord(word);
  if (letters.length <= 1) return word; // роТро░рпБ роОро┤рпБродрпНродрпБ роЪрпКро▓рпН роОройрпНро▒ро╛ро▓рпН skip

  let shuffled = [...letters];
  let attempts = 0;

  // роЕроЪро▓рпН роЪрпКро▓рпНро▓рпИ роорпАрогрпНроЯрпБроорпН родро░ро╛рооро▓рпН loop
  do {
    shuffled.sort(() => Math.random() - 0.5);
    attempts++;
  } while (shuffled.join('') === word && attempts < 10);

  return shuffled.join(' ');
}



// роХрпЗро│рпНро╡ро┐роХро│рпН родро╛ройро╛роХ роЙро░рпБро╡ро╛роХрпНроХроорпН
let QUESTIONS = WORDS.map(w=>({
  answer: w,
  scrambled: shuffleTamilWord(w)
}));

const PER_PAGE=10;
let currentPage=1;
let totalPages=Math.ceil(QUESTIONS.length/PER_PAGE);
let answers=Array(QUESTIONS.length).fill("");
let status=Array(QUESTIONS.length).fill(null);

const quizDiv=document.getElementById("quiz");
const pagination=document.getElementById("pagination");
const infoDiv=document.getElementById("info");
const prevBtn=document.getElementById("prevBtn");
const nextBtn=document.getElementById("nextBtn");
const homeBtn=document.getElementById("homeBtn");
const retryBtn=document.getElementById("retryBtn");
const checkBtn=document.getElementById("checkBtn");

function renderPagination(){
  pagination.innerHTML="";
  for(let p=1;p<=totalPages;p++){
    const btn=document.createElement("div");
    btn.className="page-btn"+(p===currentPage?" active":"");
    btn.textContent=p;
    btn.onclick=()=>{currentPage=p;renderPage(p);window.scrollTo({top:0});};
    pagination.appendChild(btn);
  }
}

function renderPage(page){
  quizDiv.innerHTML="";
  const headerBox=document.createElement("div");
  headerBox.className="header-box";
  headerBox.innerHTML=`<div>ЁЯУЭ роХрпЗро│рпНро╡ро┐роХро│рпН</div><div>тЬПя╕П рокродро┐ро▓рпНроХро│рпН</div>`;
  quizDiv.appendChild(headerBox);

  const start=(page-1)*PER_PAGE;
  const end=Math.min(start+PER_PAGE,QUESTIONS.length);

  for(let i=start;i<end;i++){
    const q=QUESTIONS[i];
    const card=document.createElement("div");
    card.className="qcard";
    const title=document.createElement("div");
    title.className="qnumber";
    title.textContent=i+1;
    card.appendChild(title);

    const row=document.createElement("div");
    row.className="scrambled-row";

    const letters=document.createElement("div");
    letters.style.display="flex";
    letters.style.gap="6px";
    q.scrambled.split(" ").forEach(ch=>{
      const box=document.createElement("div");
      box.className="scr-letter";
      box.textContent=ch;
      letters.appendChild(box);
    });
    row.appendChild(letters);

    const input=document.createElement("input");
    input.type="text";
    input.className="answer-input";
    input.value=answers[i];
    input.addEventListener("input",()=>answers[i]=input.value);
    if(status[i]==="ok")input.classList.add("ok");
    else if(status[i]==="bad")input.classList.add("bad");
    row.appendChild(input);

    card.appendChild(row);
    quizDiv.appendChild(card);
  }

  renderPagination();
  prevBtn.style.display=page>1?"inline-block":"none";
  nextBtn.style.display=page<totalPages?"inline-block":"none";
  checkBtn.style.display=page===totalPages?"inline-block":"none";
  infoDiv.textContent=`рокроХрпНроХроорпН ${page} / ${totalPages}`;
}

function checkAllPages(){
  let correct=0,wrong=0,empty=0;
  QUESTIONS.forEach((q,i)=>{
    const ans=(answers[i]||"").trim();
    if(ans===""){status[i]="empty";empty++;}
    else if(ans===q.answer.trim()){status[i]="ok";correct++;}
    else{status[i]="bad";wrong++;}
  });
  renderPage(currentPage);
  infoDiv.innerHTML=`
  ЁЯОп роорпКродрпНрод роХрпЗро│рпНро╡ро┐роХро│рпН: ${QUESTIONS.length}<br>
  тЬЕ роЪро░ро┐ропро╛ройро╡рпИ: ${correct}<br>
  тЭМ родро╡ро▒ро╛ройро╡рпИ: ${wrong}<br>
  тЪая╕П ро╡ро┐роЯрпИропро│ро┐роХрпНроХро╛родро╡рпИ: ${empty}<br>
  ЁЯТп роородро┐рокрпНрокрпЖрогрпН: ${correct} / ${QUESTIONS.length}`;
  window.scrollTo({top:0,behavior:"smooth"});
}

retryBtn.onclick=()=>{
  QUESTIONS = WORDS.map(w=>({answer:w,scrambled:shuffleTamilWord(w)}));
  answers.fill("");
  status.fill(null);
  currentPage=1;
  renderPage(1);
  infoDiv.textContent="ЁЯФБ рокрпБродро┐роп роХрпЗро│рпНро╡ро┐роХро│рпН роПро▒рпНро▒рокрпНрокроЯрпНроЯрпБро│рпНро│рой!";
};

nextBtn.onclick=()=>{if(currentPage<totalPages){currentPage++;renderPage(currentPage);window.scrollTo({top:0});}};
prevBtn.onclick=()=>{if(currentPage>1){currentPage--;renderPage(currentPage);window.scrollTo({top:0});}};
homeBtn.onclick=()=>{window.location.href="class1.html";};
checkBtn.onclick=checkAllPages;

renderPage(currentPage);
// ----------------- SCRIPT END -----------------
</script>
</body>
</html>
